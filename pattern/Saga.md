# 사가 패턴
- 로컬 트랜잭션들이 순차적으로 업데이트를 수행해 나가는 패턴을 의미한다.
- 각각 마이크로 서비스에서 책임지고 트랜잭션을 처리하는데 문제 발생 -> 보상 이벤트를 통해 보상 트랜잭션을 발행하여 이전 서비스들에게 롤백하자
- MSA는 물리적으로 DB가 분뤼되어 있어 단일 트랜잭션으로 커밋, 롤백 처리가 불가능하다 -> MSA는 비즈니스 로직으로 커밋, 롤백 등 트랜잭션에 대한 책임을 가지도록 구현 필요

### Orchestration based SAGA pattern
- 분산 트랜잭션을 책임지는 별도의 중계자가 존재
- 중계자는 사가 인스턴스를 발급하여 각 작업의 상태를 저장 및 해석하며, 보상 트랜잭션을 사용하여 오류 복구를 처리한다.

### Choreography base SAGA pattern
- 분산 트랜잭션을 책임지는 중계자가 존재하지 않는 방식
- 순서
  - 로컬 트랜잭션을 처리하고 다음 서비스에게 이벤트 전달
  - 성공, 실패를 큐로 응답으로 넣어준다.
  - 실패시 보상 트랜잭션 발행